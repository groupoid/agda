language: c

cache:
  directories:
    - $HOME/.cabal/packages
    - $HOME/.cabal/store

matrix:
  include:
    - compiler: "ghc-8.0.2"
      addons: {apt: {packages: [ghc-ppa-tools,cabal-install-head,ghc-8.0.2,alex-3.1.7,happy-1.19.5],
                      sources: [hvr-ghc]}}

install:
  - mkdir -p ~/.agda/libs/cubical
  - printf "name:" > ~/.agda/libs/cubical/cubical.agda-lib
  - printf " cubical" >> ~/.agda/libs/cubical/cubical.agda-lib
  - printf "cubical" > ~/.agda/defaults
  - printf "$HOME/.agda/libs/cubical/cubical.agda-lib" > ~/.agda/libraries
  - git clone git://github.com/agda/agda && cd agda
  - cabal sandbox init
  - cabal install
  - cd ..

script:
  - ./.cabal-sandbox/bin/agda Infinity/Cubical.agda
